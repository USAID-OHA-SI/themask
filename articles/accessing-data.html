<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing Masked Data • themask</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing Masked Data">
<meta property="og:description" content="themask">
<meta property="og:image" content="https://usaid-oha-si.github.io/themask/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">themask</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/accessing-data.html">Accessing Masked Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USAID-OHA-SI/themask/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing Masked Data</h1>
            
      
      
      <div class="hidden name"><code>accessing-data.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In OHA/SI, we our days are filled with pouring over MER Structure
Datasets (MSD). These data help inform programming and to make policy
decisions, largely through visualization to communicate our analyses.
MER data are not publicly available in the forms we have access to.work
with, which makes it challenging to share work products, develop
training material, or test database schemas. To alleviate these concerns
while keeping true to our dataset structure, we have developed a masked
data that can easily be supplemented or stand in place of the MSD.</p>
<p>The training dataset is masked with geographic and team names from <a href="https://en.wikipedia.org/wiki/Minor_League_Baseball#Leagues_and_affiliations" class="external-link">Minor
League Baseball</a> to stand in for <code>snu1</code>,
<code>psnu</code>, <code>mech_name</code> and
<code>prime_partner_name</code>. Other unique identifies, e.g. “uids”,
have been generated (<code><a href="../reference/msk_gen_uid.html">msk_gen_uid()</a></code>) or in more limited
cases have been striped out entirely. The masked operating unit/country
is the Kingdom of Minoria, which consists of four regions,
<code>snu1</code>, each with four districts, <code>psnu</code>
(<code>minoria_geo</code>).</p>
<p><img src="minoria_map.png"><!-- --></p>
<p>The data consist of only indicators from the PEPFAR HIV clinical
cascade (see <code><a href="https://usaid-oha-si.github.io/gophr/reference/cascade_ind.html" class="external-link">gophr::cascade_ind</a></code>).</p>
</div>
<div class="section level2">
<h2 id="accessing-data">Accessing Data<a class="anchor" aria-label="anchor" href="#accessing-data"></a>
</h2>
<p>Since these data have been masked, we are able to <a href="https://github.com/USAID-OHA-SI/themask/releases" class="external-link">host them
publicly on our GitHub repository via releases</a>. Each quarter, we
will do our best to update here for your use. To view the PEPFAR MSD
schedule, see <code><a href="https://rdrr.io/pkg/glamr/man/pepfar_data_calendar.html" class="external-link">glamr::pepfar_data_calendar</a></code>. There are a few
different ways for you at access the data to start using them.</p>
<div class="section level3">
<h3 id="r">R<a class="anchor" aria-label="anchor" href="#r"></a>
</h3>
<p>The easiest way to access the data are directly from R using this
package. We have built a wrapper around the <code>piggyback</code>
package to work with releases. You can use <code><a href="../reference/msk_available.html">msk_available()</a></code>
to check the latest masked MSD version available and then
<code><a href="../reference/msk_download.html">msk_download()</a></code> to download the data. The
<code><a href="../reference/msk_available.html">msk_available()</a></code> will give you a warning if there is a newer
MSD available if you want to create your own version.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Install OHA packages from rOpenSci</span></span>
<span><span class="va">oha_pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gophr"</span>, <span class="st">"glamr"</span>, <span class="st">"glitr"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">oha_pkgs</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://usaid-oha-si.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Load Dependencies</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">themask</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usaid-oha-si.github.io/gophr/" class="external-link">gophr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/glamr" class="external-link">glamr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/glitr" class="external-link">glitr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#check if you have the latest version available</span></span>
<span><span class="fu"><a href="../reference/msk_available.html">msk_available</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; The latest available masked dataset is <span style="color: #0000BB;">PSNU_IM_FY59-61_20240614_v2_1</span></span></span>
<span><span class="co">#&gt; All available masked dataset for download:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> 2024.06.14.c [latest]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2024.05.17.i</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2024.03.15.c</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2024.02.15.i</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2023.11.14.i</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2023.09.15.c</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> 2023.06.16.c</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; By default, the latest file is downloaded but you can specify the version from</span></span>
<span><span class="co">#&gt; above list in the <span style="color: #00BB00;">tag</span> param of `msk_download()`</span></span></code></pre></div>
<p>From the file path, we can see the date and version in the file name
which will match the MSD releases. From this file, we can see that the
latest masked version available is from 2023-09-15, which is from Q3,
and the v2 indicates this is the quarter’s clean version (as opposed to
the initial which would be v1).</p>
<p>To download, we can just run <code><a href="../reference/msk_download.html">msk_download()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#download folder path</span></span>
<span><span class="va">download_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glamr/man/temp_folder.html" class="external-link">temp_folder</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">ℹ</span> A temporary folder is now available here: <span style="color: #0000BB;">'/tmp/RtmpMcT4oe/file1963643dfee0/'</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">ℹ</span> The folder path is stored as the object <span style="color: #555555;">`folderpath_tmp`</span></span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#download</span></span>
<span><span class="fu"><a href="../reference/msk_download.html">msk_download</a></span><span class="op">(</span><span class="va">download_folder</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> The masked MSD has been downloaded to <span style="color: #0000BB;">/tmp/RtmpMcT4oe/file1963643dfee0</span></span></span></code></pre></div>
<p>In the above example, we could have specified the param
<code>launch = TRUE</code> which opens up the Window’s folder specified
automatically. The other parameter not used is the <code>tag</code>,
which you can use to <a href="https://github.com/USAID-OHA-SI/themask/releases" class="external-link">specify an
older, available version</a> to use,
e.g. <code>tag = 2023.05.31.i</code>.</p>
<p>To load the data into R, you can use your normal
<code><a href="https://usaid-oha-si.github.io/gophr/reference/read_psd.html" class="external-link">gophr::read_psd()</a></code> to get going.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_msd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glamr/man/return_latest.html" class="external-link">return_latest</a></span><span class="op">(</span><span class="va">download_folder</span>, <span class="st">"PSNU_IM"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://usaid-oha-si.github.io/gophr/reference/read_psd.html" class="external-link">read_psd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">ℹ</span> Latest file in <span style="color: #0000BB;">'file1963643dfee0'</span> matching <span style="color: #0000BB;">'PSNU_IM'</span>:</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">'MER_Structured_TRAINING_Datasets_PSNU_IM_FY59-61_20240614_v2_1.zip'</span></span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">df_msd</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 53,641</span></span>
<span><span class="co">#&gt; Columns: 48</span></span>
<span><span class="co">#&gt; $ operatingunit               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Minoria", "Minoria", "Minoria", "Minoria"…</span></span>
<span><span class="co">#&gt; $ operatingunituid            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "kAYJjRwuXG6", "kAYJjRwuXG6", "kAYJjRwuXG6…</span></span>
<span><span class="co">#&gt; $ country                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Minoria", "Minoria", "Minoria", "Minoria"…</span></span>
<span><span class="co">#&gt; $ snu1                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Midwest", "Midwest", "Midwest", "Midwest"…</span></span>
<span><span class="co">#&gt; $ snu1uid                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Dh3xiXWw0Z7", "Dh3xiXWw0Z7", "Dh3xiXWw0Z7…</span></span>
<span><span class="co">#&gt; $ cop22_psnu                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Quad Cities", "Great Lakes", "Great Lakes…</span></span>
<span><span class="co">#&gt; $ cop22_psnuuid               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FBzC1U92lJn", "gwmjspIcLT4", "gwmjspIcLT4…</span></span>
<span><span class="co">#&gt; $ cop22_snuprioritization     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 - Scale-Up: Saturation", "1 - Scale-Up:…</span></span>
<span><span class="co">#&gt; $ psnu                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Quad Cities", "Great Lakes", "Great Lakes…</span></span>
<span><span class="co">#&gt; $ psnuuid                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FBzC1U92lJn", "gwmjspIcLT4", "gwmjspIcLT4…</span></span>
<span><span class="co">#&gt; $ snuprioritization           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 - Scale-Up: Saturation", "1 - Scale-Up:…</span></span>
<span><span class="co">#&gt; $ typemilitary                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "N", "N", "N", "N", "N", "N", "N", "N", "N…</span></span>
<span><span class="co">#&gt; $ dreams                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "N", "N", "N", "N", "N", "N", "N", "N", "N…</span></span>
<span><span class="co">#&gt; $ prime_partner_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Captains", "Captains", "Chiefs", "Captain…</span></span>
<span><span class="co">#&gt; $ funding_agency              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "HHS/CDC", "HHS/CDC", "HHS/CDC", "HHS/CDC"…</span></span>
<span><span class="co">#&gt; $ mech_code                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01498", "01498", "01470", "01498", "01568…</span></span>
<span><span class="co">#&gt; $ mech_name                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Captains", "Captains", "Chiefs", "Captain…</span></span>
<span><span class="co">#&gt; $ is_indigenous_prime_partner <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…</span></span>
<span><span class="co">#&gt; $ indicator                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "HTS_TST", "TX_CURR_Lag2", "TX_PVLS", "HTS…</span></span>
<span><span class="co">#&gt; $ numeratordenom              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "N", "N", "D", "N", "N", "N", "N", "N", "N…</span></span>
<span><span class="co">#&gt; $ indicatortype               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "DSD", "DSD", "DSD", "DSD", "DSD", "DSD", …</span></span>
<span><span class="co">#&gt; $ standardizeddisaggregate    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Modality/Age/Sex/Result", "Age/Sex/ARVDis…</span></span>
<span><span class="co">#&gt; $ categoryoptioncomboname     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25-29, Male, Negative", "&lt;15, Male, ARV D…</span></span>
<span><span class="co">#&gt; $ use_for_age                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "ARVDispense", "Y", "Y", "Y", "Y", "Y…</span></span>
<span><span class="co">#&gt; $ ageasentered                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25-29", "&lt;15", "45-49", "01-04", "35-39",…</span></span>
<span><span class="co">#&gt; $ age_2018                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25-29", "Coarse", "40-49", "01-09", "35-3…</span></span>
<span><span class="co">#&gt; $ age_2019                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25-29", "Coarse", "45-49", "01-04", "35-3…</span></span>
<span><span class="co">#&gt; $ target_age_2024             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25-34", "Coarse", "35-49", "01-09", "35-4…</span></span>
<span><span class="co">#&gt; $ trendscoarse                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "15+", "&lt;15", "15+", "&lt;15", "15+", "15+", …</span></span>
<span><span class="co">#&gt; $ sex                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Male", "Male", "Male", "Male", "Female", …</span></span>
<span><span class="co">#&gt; $ statushiv                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Negative", "Positive", "Positive", "Posit…</span></span>
<span><span class="co">#&gt; $ statustb                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ statuscx                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ hiv_treatment_status        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, NA, NA, NA, NA, "New", NA, NA, "New", …</span></span>
<span><span class="co">#&gt; $ otherdisaggregate           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, "ARV Dispensing Quantity - Less than 3…</span></span>
<span><span class="co">#&gt; $ otherdisaggregate_sub       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ modality                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "VCT", NA, NA, "Other PITC", "PMTCT ANC", …</span></span>
<span><span class="co">#&gt; $ target_modality_2024        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Other Facility", "N/A", "N/A", "Other Fac…</span></span>
<span><span class="co">#&gt; $ fiscal_year                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2061, 2060, 2059, 2060, 2059, 2059, 2059, …</span></span>
<span><span class="co">#&gt; $ targets                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, NA, NA, 1, 606, NA, 82, NA, NA, NA, 23…</span></span>
<span><span class="co">#&gt; $ qtr1                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, 10, NA, NA, 5, 1, NA, 1, 1, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ qtr2                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 5, NA, NA, 8, 2, NA, 3, 3, 1, NA, 3, 11…</span></span>
<span><span class="co">#&gt; $ qtr3                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, 5, NA, NA, 8, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ qtr4                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, 9, 1, NA, 9, NA, NA, NA, NA, NA, NA, 2…</span></span>
<span><span class="co">#&gt; $ cumulative                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 9, 1, NA, 30, 3, NA, 4, 4, 1, 0, 5, 43,…</span></span>
<span><span class="co">#&gt; $ safe_for_net_new            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "Y", "Y", "N", "N", "Y", "N", "Y", "Y…</span></span>
<span><span class="co">#&gt; $ safe_for_vlc                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "Y", "N", "N", "N", "Y", "N", "Y", "Y…</span></span>
<span><span class="co">#&gt; $ source_name                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "DATIM", "Derived", "DATIM", "Derived", "D…</span></span></code></pre></div>
<p>Also note that if you use the masked dataset, you can use
<code><a href="https://usaid-oha-si.github.io/gophr/reference/get_metadata.html" class="external-link">gophr::get_metadata()</a></code>, specifying the path to the file and
it will provide information about the masked dataset you can use in the
caption for your plot or other documentation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://usaid-oha-si.github.io/gophr/reference/get_metadata.html" class="external-link">get_metadata</a></span><span class="op">(</span><span class="va">download_folder</span>, <span class="st">"PSNU_IM"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">ℹ</span> Latest file in <span style="color: #0000BB;">'file1963643dfee0'</span> matching <span style="color: #0000BB;">'PSNU_IM'</span>:</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">'MER_Structured_TRAINING_Datasets_PSNU_IM_FY59-61_20240614_v2_1.zip'</span></span></span>
<span><span class="co">#&gt; Warning: <span style="color: #00BB00;">metadata</span> is NO LONGER (v3.2.3) exported by default as a global</span></span>
<span><span class="co">#&gt; object.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">ℹ</span> You must store the output as an object to use, e.g. <span style="color: #555555;">`meta &lt;-</span></span></span>
<span><span class="co"><span style="color: #555555;">#&gt; get_metadata()`</span></span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">meta</span></span>
<span><span class="co">#&gt; $curr_pd</span></span>
<span><span class="co">#&gt; FY61Q2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $curr_fy</span></span>
<span><span class="co">#&gt; [1] 2061</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $curr_fy_lab</span></span>
<span><span class="co">#&gt; FY61</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $curr_qtr</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $source</span></span>
<span><span class="co">#&gt; FY61Q2c Faux Training MSD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $caption</span></span>
<span><span class="co">#&gt; Source: FY61Q2c Faux Training MSD</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manual">Manual<a class="anchor" aria-label="anchor" href="#manual"></a>
</h3>
<p>For those not using R, fear not! You can use these data as well.
Instead of having a direct function to do these things, you can manually
navigate to the <a href="https://github.com/USAID-OHA-SI/themask/releases" class="external-link">Releases
page</a> on GitHub. There, you will want to click on the <a href="https://github.com/USAID-OHA-SI/themask/releases/tag/latest" class="external-link">release
tagged “latest”</a>. You can then select the MSD to download it and use
it as you normally would a MSD.</p>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-masked-msd">Creating a Masked MSD<a class="anchor" aria-label="anchor" href="#creating-a-masked-msd"></a>
</h2>
<p>If you run <code><a href="../reference/msk_available.html">msk_available()</a></code> and it is out of date, or you
want to create a masked NAT_SUBNAT dataset, you can create your own if
you have the full <a href="https://pepfar-panorama.org/forms/downloads/" class="external-link">MSD or NAT_SUBNAT
dataset</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#path to local NAT_SUBNAT dataset</span></span>
<span><span class="va">subnat_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glamr/man/si_path.html" class="external-link">si_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/glamr/man/return_latest.html" class="external-link">return_latest</a></span><span class="op">(</span><span class="st">"NAT_SUBNAT"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#store a masked NAT_SUBNAT dataset</span></span>
<span><span class="fu"><a href="../reference/msk_create.html">msk_create</a></span><span class="op">(</span><span class="va">subnat_path</span>, <span class="st">"../Documents/Data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generate a masked NAT_SUBNAT dataset to load to your session</span></span>
<span><span class="va">df_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/msk_create.html">msk_create</a></span><span class="op">(</span><span class="va">subnat_path</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mapping">Mapping<a class="anchor" aria-label="anchor" href="#mapping"></a>
</h2>
<p>In addition to the masked MSD files produced, we have also created
shapefiles that can be used for mapping.</p>
<div class="section level3">
<h3 id="r-1">R<a class="anchor" aria-label="anchor" href="#r-1"></a>
</h3>
<p>Within <code>themask</code> package itself, we have a few
<code>sf</code> dataframes that can be interacted with and plotted -
<code>minoria_shp_ou</code>, <code>minoria_shp_snu1</code>,
<code>minoria_shp_psnu</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">minoria_shp_psnu</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="va">geometry</span>, fill <span class="op">=</span> <span class="va">snu1</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, linewidth <span class="op">=</span> <span class="fl">0.25</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">minoria_shp_ou</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="va">geometry</span><span class="op">)</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"white"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">minoria_shp_psnu</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="va">geometry</span>, label <span class="op">=</span> <span class="va">psnu</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">7</span><span class="op">/</span><span class="va">.pt</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://usaid-oha-si.github.io/glitr/reference/scale_fill_si.html" class="external-link">scale_fill_si</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"siei"</span>, discrete <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://usaid-oha-si.github.io/glitr/reference/scale_color_si.html" class="external-link">scale_color_si</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"siei"</span>, discrete <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://usaid-oha-si.github.io/glitr/reference/si_style_map.html" class="external-link">si_style_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span>, </span>
<span>       title <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="st">"INTRODUCING MINORIA, THE NEWEST OU TO PEPFAR"</span>, width <span class="op">=</span> <span class="fl">32</span><span class="op">)</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"PSNUs labeled on map"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: Minoria faux shapefiles"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#edf5fc"</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="minoria_map.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="manual-1">Manual<a class="anchor" aria-label="anchor" href="#manual-1"></a>
</h3>
<p>The shapefile can also be downloaded manually for use in your GIS
software of choice, e.g. ArcGIS, QGIS, Tableau. You can download these
files from the repository’s Releases page, clicking on the <a href="https://github.com/USAID-OHA-SI/themask/releases/tag/shapefiles" class="external-link">release
tagged “shapefiles”</a>. Download the zip file(s) you need and unzip
them to start using them with your mapping software.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aaron Chafetz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
